# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "Timeout (control socket)" –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ FTP-—Å–µ—Ä–≤–µ—Ä—É. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. –°–µ—Ä–≤–µ—Ä —Ç—Ä–µ–±—É–µ—Ç **SFTP** (–ø–æ—Ä—Ç 22), –∞ –Ω–µ FTP (–ø–æ—Ä—Ç 21)
2. –°–µ—Ä–≤–µ—Ä —Ç—Ä–µ–±—É–µ—Ç **FTPS** (–∑–∞—â–∏—â–µ–Ω–Ω—ã–π FTP, –ø–æ—Ä—Ç 990)
3. –ù–µ–≤–µ—Ä–Ω—ã–π FTP-—Ö–æ—Å—Ç
4. –°–µ—Ä–≤–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ GitHub Actions

## –†–µ—à–µ–Ω–∏—è –ø–æ –ø–æ—Ä—è–¥–∫—É

### –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FTPS (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–≤—ã–º)

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π workflow —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ FTPS. –ï—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã.

### –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ FTP-—Ö–æ—Å—Ç –≤ ISPmanager

–í –ø–∞–Ω–µ–ª–∏ ISPmanager:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **"FTP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–æ–π **—Ö–æ—Å—Ç** —É–∫–∞–∑–∞–Ω
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **IP-–∞–¥—Ä–µ—Å** –≤–º–µ—Å—Ç–æ –¥–æ–º–µ–Ω–∞:
   - –ò–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞: `31.31.197.50`
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `REG_RU_FTP_HOST` –≤ GitHub –Ω–∞ IP-–∞–¥—Ä–µ—Å

### –†–µ—à–µ–Ω–∏–µ 3: –ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–∞ SFTP

–ï—Å–ª–∏ Reg.ru/ISPmanager —Ç—Ä–µ–±—É–µ—Ç SFTP, –æ–±–Ω–æ–≤–∏—Ç–µ workflow:

```yaml
- name: Deploy to Reg.ru via SFTP
  uses: SamKirkland/FTP-Deploy-Action@v4.3.5
  with:
    server: ${{ secrets.REG_RU_FTP_HOST }}
    username: ${{ secrets.REG_RU_FTP_USER }}
    password: ${{ secrets.REG_RU_FTP_PASSWORD }}
    protocol: sftp
    port: 22
    local-dir: ./build/web/
    server-dir: /www/fastselect.ru/  # –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ / –≤ –Ω–∞—á–∞–ª–µ
```

### –†–µ—à–µ–Ω–∏–µ 4: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ lftp —á–µ—Ä–µ–∑ SSH (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–ï—Å–ª–∏ FTP/SFTP –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± –¥–µ–ø–ª–æ—è. –ù–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è –≤—ã—à–µ.

### –†–µ—à–µ–Ω–∏–µ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å server-dir

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:
- ‚úÖ `./www/fastselect.ru/` (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π)
- ‚úÖ `/www/fastselect.ru/` (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π —Å `/`)
- ‚ùå `www/fastselect.ru/` (–±–µ–∑ —Ç–æ—á–∫–∏ –∏ —Å–ª–µ—à–∞)

## –ü–æ—à–∞–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ FTP –¥–∞–Ω–Ω—ã–µ –≤ ISPmanager

1. **FTP-—Ö–æ—Å—Ç**: –ó–∞–ø–∏—à–∏—Ç–µ —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å: `fastselect.ru`, `ftp.fastselect.ru`, –∏–ª–∏ IP `31.31.197.50`
   
2. **–ü–æ—Ä—Ç**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–æ–π –ø–æ—Ä—Ç —É–∫–∞–∑–∞–Ω
   - `21` - –æ–±—ã—á–Ω—ã–π FTP
   - `22` - SFTP
   - `990` - FTPS

3. **–ü—Ä–æ—Ç–æ–∫–æ–ª**: –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ FileZilla —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏

### –®–∞–≥ 2: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FTP-–∫–ª–∏–µ–Ω—Ç (FileZilla, WinSCP) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è FileZilla:**
- –•–æ—Å—Ç: `fastselect.ru` (–∏–ª–∏ IP)
- –ü–æ—Ä—Ç: `21` (–∏–ª–∏ `22` –¥–ª—è SFTP)
- –ü—Ä–æ—Ç–æ–∫–æ–ª: FTP/FTPS –∏–ª–∏ SFTP
- –õ–æ–≥–∏–Ω: –≤–∞—à FTP-–ª–æ–≥–∏–Ω
- –ü–∞—Ä–æ–ª—å: –≤–∞—à FTP-–ø–∞—Ä–æ–ª—å

–ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö GitHub Actions.

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –æ–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `REG_RU_FTP_HOST`:
- –ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å IP - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP
- –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–æ–º–µ–Ω–æ–º - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ–º–µ–Ω

### –®–∞–≥ 4: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–í workflow –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ –æ—á–µ—Ä–µ–¥–∏:

**–í–∞—Ä–∏–∞–Ω—Ç A: FTPS (–∑–∞—â–∏—â–µ–Ω–Ω—ã–π FTP)**
```yaml
protocol: ftps
port: 21
```

**–í–∞—Ä–∏–∞–Ω—Ç B: SFTP**
```yaml
protocol: sftp
port: 22
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –û–±—ã—á–Ω—ã–π FTP**
```yaml
protocol: ftp
port: 21
```

## –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–≤—ã–º)

1. **–ò–∑–º–µ–Ω–∏—Ç–µ `REG_RU_FTP_HOST` –Ω–∞ IP-–∞–¥—Ä–µ—Å:**
   - –í GitHub Secrets –∑–∞–º–µ–Ω–∏—Ç–µ `fastselect.ru` –Ω–∞ `31.31.197.50`

2. **–ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª:**
   - –í `.github/workflows/deploy_to_regru.yml` –∏–∑–º–µ–Ω–∏—Ç–µ `protocol: ftps` –Ω–∞ `protocol: sftp`
   - –ò `port: 21` –Ω–∞ `port: 22`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ ISPmanager –¥–æ–º–∞—à–Ω—è—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è FTP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `/www/fastselect.ru`

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π action

–ï—Å–ª–∏ FTP-Deploy-Action –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–±:

```yaml
- name: Deploy via rsync over SSH
  uses: burnett01/rsync-deployments@7.0.0
  with:
    switches: -avzr --delete
    path: ./build/web/
    remote_path: /www/fastselect.ru/
    remote_host: ${{ secrets.REG_RU_FTP_HOST }}
    remote_user: ${{ secrets.REG_RU_FTP_USER }}
    remote_key: ${{ secrets.REG_RU_SSH_KEY }}
```

–ù–æ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–µ–Ω SSH-–∫–ª—é—á, –∞ –Ω–µ –ø–∞—Ä–æ–ª—å.

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ö–æ—Å—Ç –Ω–∞ IP** (`31.31.197.50`)
2. **–ó–∞—Ç–µ–º –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã** (FTPS, SFTP)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å** –≤ ISPmanager
4. –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç - —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Reg.ru –∏ —Å–ø—Ä–æ—Å–∏—Ç–µ:
   - –ö–∞–∫–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è FTP-–¥–æ—Å—Ç—É–ø–∞: FTP, FTPS –∏–ª–∏ SFTP?
   - –ö–∞–∫–æ–π –ø–æ—Ä—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
   - –ù—É–∂–µ–Ω –ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç –¥–ª—è FTP?

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ FTP –¥–∞–Ω–Ω—ã–µ –≤ ISPmanager
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ FileZilla
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –∏ workflow
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π

